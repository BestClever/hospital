<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.aaa.mapper.LleaveMapper">
    <select id="selRegisters" parameterType="Register" resultType="Register">
        select r.registerid,r.userName,r.age,r.sex,d.department department,r.money,c.doctorName doctorName,r.address,r.phone,r.idcard,r.registerDate,b.bedname bedName,r.operator,r.endDate,r.price,(r.money-r.price) prices
        from register r,departments d,doctor c,bed b
        <where>
            r.state=1 and r.department=d.departmentId and r.doctor=c.doctorId and r.bedNum=b.bedId
            <if test="userName!=null and userName!=''">
                and r.userName like concat('%',concat(#{userName},'%'))
            </if>
        </where>
    </select>
</mapper>